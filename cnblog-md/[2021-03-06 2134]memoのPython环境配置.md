# Python环境配置

属予作文以记之。

## 首先

打开网页
`https://mirrors.tuna.tsinghua.edu.cn`
浏览一下，都是好东西。
把这个网址保存为书签，经常要用的。
有条件的话，还是需要一个翻墙工具。
毕竟，\[DGP\](.*)Hub需要经常访问。

## Python!

Life is short，所以用python。因为从事的不是互联网行业，一直做仿真渲染什么的，只会用个C+++OpenGL什么的，弱爆了！尤其是和伟大的python比起来。
所以，第一步，首先安装python环境。
装python首选什么？官网下载python？选择2.7还是3.4，3.5，3.6，3.7，3.8，3.9，甚至现在的3.10？
呵呵。
去清华镜像站，下载一个anaconda安装吧！
或者，就直接安装一个miniconda也可以。
区别就是anaconda安装完了之后，`base`环境带了一堆科学计算的东西，numpy，scipy，matplotlib等等。而miniconda可干净了。

至于用哪个python版本，喜欢的话就都试试咯，多个环境，都可以共存，想用谁就用谁！
不过我个人推荐还是3.8，最起码是3.6以上的版本。
因为python3.6才有f-string语法。就和蚁力神一样，谁用谁知道。

安装完了之后，不要用那个什么管理界面，听闻巨难用。反正命令行也挺亲民的。

anaconda安装好了之后，会默认附带一个python版本（我当前是python3.8.5），并创建一个叫做```base```的环境。
我觉得怎么也得升级一下python3.8，当前都到了3.8.8了，多少都得修复一些bug吧。
所以，我选择，首先打开`https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/`。
是的，有镜像源，说啥也得先到镜像站替换国内源啊！

> 说到镜像源，顺便更新一下pip的镜像源吧。
> `https://mirrors.tuna.tsinghua.edu.cn/help/pypi/`
> 不会吃亏，不会上当。

替换好源之后，先更新一波：
```
conda update conda
conda update anaconda
conda install python
```
这里会默认升级python的小版本号，我就是从3.8.5升级到了3.8.8。
大版本号需要手动指定`python=3.7`之类的。
我猜测。
反正是base，无所谓。

## 快速用法

创建一个虚拟环境，名字叫做`py37`，安装python3.7，顺带安装一个willow。
`conda create --name py37 python=3.7 willow`


创建一个虚拟环境，名字叫做`tf`，整体从上面创建的环境`py37`克隆一份，一模一样的。
`conda create -n tf python=3.7 --clone py37`

切换到名字叫做`tf`的环境中。
`conda activate tf`  

退出python环境。
`conda deactivate`  

查看当前都有哪些环境。
`conda env list`

查看当前环境下都安装了什么package。
`conda list`

彻底删除一个叫做`tf`的环境。这里用了`--all`，表示所有的。不然可以指定删除指定环境的某个package。
`conda remove -n tf --all`

其实删除或者安装package当然要用下面两个命令啦。
```
conda install willow
conda uninstall willow
```


其实也可以使用pip。不过我推荐用conda安装。
我发现一个事，那就是如果在别的环境里面存在当前的package，conda会直接给复制过去。
pip的话，我猜测会下载吧（我没测试）。
不过conda里面不是挺全的。比如`panda3d`，我就是从pip安装的。

## 导入导出

还有一个挺好玩的功能，就是导入导出：
`conda env export > tf.yaml`
把当前conda环境配置导出到`tf.yaml`的文件中啦。

用下面的命令就是从文件导入了：
`conda env create -f tf.yaml`

上面的命令只包括conda安装的。如果是用pip安装的，哎呀呀。所以顺带下面两个命令吧：
```
pip freeze > requirements.txt
pip install -r requirements.txt
```


以上。暂时就记得这么多。